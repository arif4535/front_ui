<div class="container">
  <div class="row">
    <div class="col-md-6 mx-auto my-auto renk rounded-2 shadow p-3 d-flex justify-content-center">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <p class="h2 text-center">Üyelik Sayfası</p>
      <div class="row d-flex justify-content-center">
        <div class="col-md-6">
         <label for="usernameInput" >Name</label>
          <input type="text" class="form-control" id="usernameInput" placeholder="Name" formControlName="name" 
          [class.is-invalid]="_fControls['name'].invalid && _fControls['name'].touched " required/>
          <div
            *ngIf="_fControls['name'].invalid && _fControls['name'].touched"
            class="invalid-feedback"
          >
         <!-- <div *ngIf="_fControls['name'].errors['required']">
            name is required.
          </div>
          <div *ngIf="_fControls['name'].errors['minlenght']">
            Min 4 characters.
          </div>
          <div *ngIf="_fControls['name'].errors['maxlenght']">
            max 20 characters.
          </div>-->
          </div>
        </div>
        <div class="form-group col-md-6">
          <label for="lastnameInput">Lastname</label>
          <input type="text" class="form-control" id="lastnameInput" placeholder="Lastname" formControlName="lastname"
          [class.is-invalid]="_fControls['lastname'].invalid && _fControls['lastname'].touched" required/>
          <div *ngIf="_fControls['lastname'].invalid && _fControls['lastname'].touched"
          class="invalid-feedback"
          >
            <!--<div *ngIf="_fControls['lastname'].errors['required']">
              lastname is required.
            </div>
            <div *ngIf="_fControls['lastname'].errors['minlenght']">
              min 4 characters.
            </div>
            <div *ngIf="_fControls['lastname'].errors['maxlenght']">
              max 20 characters.
            </div>-->
        </div>
        </div>
      </div>
      <div class="row d-flex justify-content-center">
        <div class="col-md-6">
         <label for="usernameInput" >Username</label>
          <input  type="text" class="form-control" id="usernameInput" placeholder="Username" formControlName="username"
          [class.is-invalid]="_fControls['username'].invalid && _fControls['username'].touched " />
          <div *ngIf="_fControls['username'].invalid && _fControls['username'].touched"
          class="invalid-feedback">
          <!--<div *ngIf="_fControls['username'].errors['required']">
            Username is required
          </div>
          <div *ngIf="_fControls['username'].errors['minlenght']">
            Min 4 characters.
          </div>
          <div *ngIf="_fControls['username'].errors['maxlenght']">
            max 20 characters.
          </div>-->
          </div>
        </div>
        <div class="form-group col-md-6">
          <label for="inputPassword4" >Password</label>
          <input type="password" class="form-control" id="inputPassword4" placeholder="Password" formControlName="password" 
          [class.is-invalid]="_fControls['password'].invalid && _fControls['password'].touched"/>
          <div *ngIf="_fControls['password'].invalid &&
                      _fControls['password'].touched &&
                      _fControls['password'].dirty" class="invalid-feedback">
           <!-- <div *ngIf="_fControls['password'].errors['required']">-->
              Password is required.
            </div>
          </div>
        </div>
      <div class="col-md-12">
        <label for="inputEmail4" >Email</label>
         <input type="email" class="form-control" id="inputEmail4"placeholder="Email" formControlName="email"
          [class.is-invalid]="_fControls['email'].invalid && _fControls['email'].touched"/>
          <div *ngIf="_fControls['email'].invalid && _fControls['email'].touched"
          class="invalid-feedback">
          <!-- <div *ngIf="_fControls['email'].errors['required']">
          Email is required.
        </div>
          <div *ngIf="_fControls['email'].errors['email']">
            Please enter a valid email.
          </div>-->
        </div>          
       </div>
      <div class="row d-flex justify-content-center">
        <div class="col-3 p-3 ">
            <button type="submit" (click)="saveUser()" class="btn btn-primary float-end ">Save</button>
        </div>                
    </div>   
  </form>
  </div>
  <div class="row d-flex justify-content-center">
    <div class="col-md-6 ">
      <table class="table table-striped  ">
        <thead>
          <tr >
            <th scope="col">id</th>
            <th scope="col">Name</th>
            <th scope="col">Lastname</th>
            <th scope="col">Username</th>
            <th scope="col">Password</th>
            <th scope="col ">Email</th>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let test of users; index as i ">
              <td>{{test.id}}</td>
              <td>{{test.name}}</td>
              <td>{{test.lastname}}</td>
              <td>{{test.username}}</td>
              <td>{{test.password}}</td>
              <td>{{test.email}}</td>
              <td><button class="btn btn-warning ms-2" (click)="open(test)">UPDATE </button></td>
              <td><button class="btn btn-danger ms-2" (click)="deleteUser(i)" >DELETE</button></td>
            </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
